-- Simple ESP com Team Check para Roblox

local ESP_ENABLED = true
local TEAM_CHECK = true

local players = game:GetService("Players")
local localPlayer = players.LocalPlayer

function CreateESP(plr)
    if plr == localPlayer then return end
    if TEAM_CHECK and plr.Team == localPlayer.Team then return end

    local head = plr.Character and plr.Character:FindFirstChild("Head")
    if not head then return end

    local billboard = Instance.new("BillboardGui")
    billboard.Name = "ESP_GUI"
    billboard.Adornee = head
    billboard.Size = UDim2.new(0, 100, 0, 40)
    billboard.AlwaysOnTop = true

    local nameTag = Instance.new("TextLabel")
    nameTag.Size = UDim2.new(1, 0, 1, 0)
    nameTag.Text = plr.Name
    nameTag.TextColor3 = Color3.new(1, 0, 0)
    nameTag.BackgroundTransparency = 1
    nameTag.TextStrokeTransparency = 0.5
    nameTag.Parent = billboard

    billboard.Parent = head
end

function RunESP()
    for _, plr in pairs(players:GetPlayers()) do
        if plr.Character and not plr.Character:FindFirstChild("ESP_GUI") then
            pcall(function()
                CreateESP(plr)
            end)
        end
    end
end

players.PlayerAdded:Connect(function(plr)
    plr.CharacterAdded:Connect(function()
        wait(1)
        RunESP()
    end)
end)

while ESP_ENABLED do
    RunESP()
    wait(2)
end
